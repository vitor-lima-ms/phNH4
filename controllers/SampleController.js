const Sample = require("../models/Sample");
const Project = require("../models/Project");
const User = require("../models/User");
const Pop = require("../models/Pop");
const Lsct = require("../models/Lsct");

const fs = require("fs");
const csv = require("csv-parser");
const { v4: uuidv4 } = require("uuid");
const { Op } = require("sequelize");

module.exports = class SampleController {
  static async listSamples(req, res) {
    const search = req.query.search;

    let queryOptions = {
      include: [
        {
          model: Project,
          ...(search && {
            where: {
              code: {
                [Op.like]: `%${search}%`,
              },
            },
          }),
        },
      ],
    };

    const samplesData = await Sample.findAll(queryOptions);

    const samples = samplesData.map((result) => result.get({ plain: true }));

    res.render("sample/list", { samples });
  }

  static async deleteSample(req, res) {
    await Sample.destroy({ where: { id: req.body.id } });

    res.redirect("/sample/list");
  }

  static async editSampleGet(req, res) {
    const sample = await Sample.findOne({
      raw: true,
      where: { id: req.params.id },
    });
    const projects = await Project.findAll({ raw: true });

    res.render("sample/edit", { sample, projects });
  }

  static async editSamplePost(req, res) {
    const id = req.body.id;

    const sample = await Sample.findOne({ raw: true, where: { id: id } });

    const fixedModelKeys = ["ProjectId"];

    const fixedData = {};
    const variableData = {};

    for (const key in req.body) {
      if (fixedModelKeys.includes(key)) {
        fixedData[key] = req.body[key];
      } else {
        variableData[key] = req.body[key];
      }
    }

    const dateArray = variableData.date.split("-");
    variableData.date = `${dateArray[2]}/${dateArray[1]}/${dateArray[0]}`;

    sample.ProjectId = parseInt(fixedData.ProjectId);

    sample.data = {
      ...sample.data,
      ...variableData,
    };

    await Sample.update(sample, { where: { id: id } });

    res.redirect("/sample/list");
  }

  static async importCsvGet(req, res) {
    res.render("sample/import");
  }

  static async importCsvPost(req, res) {
    if (!req.file) {
      return res.redirect("/sample/import");
    }

    const currentImportId = uuidv4();

    const results = [];
    const filePath = req.file.path;

    fs.createReadStream(filePath)
      .pipe(csv())
      .on("data", (data) => {
        const sampleToCreate = {
          ProjectId: data.ProjectId,
          importId: currentImportId,
          data: data,
        };

        results.push(sampleToCreate);
      })
      .on("end", async () => {
        fs.unlinkSync(filePath);

        if (results.length > 0) {
          try {
            await Sample.bulkCreate(results);
            res.redirect("/sample/list");
          } catch (error) {
            console.log(error);
            res.redirect("/sample/import");
          }
        } else {
          res.redirect("/sample/import");
        }
      })
      .on("error", (error) => {
        fs.unlinkSync(filePath);
        console.log(error);
        req.flash("message", "Erro ao processar o arquivo .csv!");
        res.redirect("/sample/import");
      });
  }

  static async deleteImportGet(req, res) {
    const samples = await Sample.findAll();

    let importIdsArray = [];
    for (let sample of samples) {
      if (!importIdsArray.includes(sample.dataValues.importId)) {
        importIdsArray.push(sample.dataValues.importId);
      }
    }

    res.render("sample/deleteImport", { importIdsArray });
  }

  static async deleteImportPost(req, res) {
    const importId = req.body.idSelection;

    await Sample.destroy({ where: { importId: importId } });

    res.redirect("/sample/list");
  }

  // static async step1Get(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });
  //   res.render("sample/step1", { sample });
  // }

  // static async step1Post(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });

  //   const q11 = req.body.q11;
  //   const capChoose1 = req.body.capChoose1;
  //   const q12 = req.body.q12;
  //   const subCapChoose1 = req.body.subCapChoose1;
  //   const q13 = req.body.q13;
  //   const rsTypeChoose1 = req.body.rsTypeChoose1;
  //   const q21 = req.body.q21;
  //   const capChoose2 = req.body.capChoose2;
  //   const q22 = req.body.q22;
  //   const subCapChoose2 = req.body.subCapChoose2;
  //   const q23 = req.body.q23;
  //   const rsTypeChoose2 = req.body.rsTypeChoose2;
  //   const q31 = req.body.q31;
  //   const subCapChoose3 = req.body.subCapChoose3;
  //   const q32 = req.body.q32;
  //   const rsTypeChoose3 = req.body.rsTypeChoose3;
  //   const finalChoose1 = req.body.finalChoose1;
  //   const finalChoose2 = req.body.finalChoose2;
  //   const finalChoose3 = req.body.finalChoose3;

  //   if (q11 === "yes" && q12 === "yes" && q13 === "yes") {
  //     sample.type = capChoose1 + " " + subCapChoose1 + " " + rsTypeChoose1;
  //   } else if (q11 === "no" || q12 === "no" || q13 === "no") {
  //     if (q21 === "yes" && q22 === "yes" && q23 === "yes") {
  //       sample.type = capChoose2 + " " + subCapChoose2 + " " + rsTypeChoose2;
  //     } else if (q21 === "no" || q22 === "no" || q23 === "no") {
  //       if (q31 === "yes" && q32 === "yes") {
  //         sample.type = "16" + " " + subCapChoose3 + " " + rsTypeChoose3;
  //       } else if (q31 === "no" || q32 === "no") {
  //         if (finalChoose3 === "0098") {
  //           sample.type = finalChoose1 + " " + finalChoose2 + " " + "00 98";
  //         } else {
  //           sample.type = finalChoose1 + " " + finalChoose2 + " " + "00 99";
  //         }
  //       }
  //     }
  //   }

  //   const rpU = [
  //     "01 01 06 00",
  //     "02 01 11 00",
  //     "03 02 01 00",
  //     "03 02 02 00",
  //     "03 02 03 00",
  //     "03 02 04 00",
  //     "03 02 06 00",
  //     "03 02 07 00",
  //     "03 02 08 00",
  //     "04 01 03 00",
  //     "05 01 02 00",
  //     "05 01 03 00",
  //     "05 01 04 00",
  //     "05 01 05 00",
  //     "05 01 06 00",
  //     "05 01 07 00",
  //     "05 01 08 00",
  //     "05 01 11 00",
  //     "05 01 12 00",
  //     "05 01 15 00",
  //     "05 01 18 00",
  //     "05 06 01 00",
  //     "05 06 03 00",
  //     "05 06 05 00",
  //     "05 06 06 00",
  //     "05 06 07 00",
  //     "05 06 08 00",
  //     "05 07 01 00",
  //     "06 01 01 00",
  //     "06 01 02 00",
  //     "06 01 03 00",
  //     "06 01 04 00",
  //     "06 01 05 00",
  //     "06 01 06 00",
  //     "06 02 01 00",
  //     "06 02 03 00",
  //     "06 02 04 00",
  //     "06 02 05 00",
  //     "06 04 03 00",
  //     "06 04 04 00",
  //     "06 04 05 00",
  //     "06 07 01 00",
  //     "06 07 02 00",
  //     "06 07 03 00",
  //     "06 07 04 00",
  //     "06 07 05 00",
  //     "06 11 02 00",
  //     "06 11 03 00",
  //     "06 11 04 00",
  //     "06 13 01 00",
  //     "06 13 02 00",
  //     "06 13 04 00",
  //     "06 13 05 00",
  //     "07 01 01 00",
  //     "07 01 03 00",
  //     "07 01 04 00",
  //     "07 01 07 00",
  //     "07 01 08 00",
  //     "07 01 09 00",
  //     "07 01 10 00",
  //     "07 02 01 00",
  //     "07 02 03 00",
  //     "07 02 04 00",
  //     "07 02 07 00",
  //     "07 02 08 00",
  //     "07 02 09 00",
  //     "07 02 10 00",
  //     "07 03 01 00",
  //     "07 03 03 00",
  //     "07 03 04 00",
  //     "07 03 07 00",
  //     "07 03 08 00",
  //     "07 03 09 00",
  //     "07 03 10 00",
  //     "07 04 01 00",
  //     "07 04 03 00",
  //     "07 04 04 00",
  //     "07 04 07 00",
  //     "07 04 08 00",
  //     "07 04 09 00",
  //     "07 04 10 00",
  //     "07 05 01 00",
  //     "07 05 03 00",
  //     "07 05 04 00",
  //     "07 05 05 00",
  //     "07 05 06 00",
  //     "07 05 07 00",
  //     "07 05 08 00",
  //     "07 05 09 00",
  //     "07 05 10 00",
  //     "07 06 01 00",
  //     "07 06 03 00",
  //     "07 06 04 00",
  //     "07 06 07 00",
  //     "07 06 08 00",
  //     "07 06 09 00",
  //     "07 06 10 00",
  //     "07 07 01 00",
  //     "07 07 03 00",
  //     "07 07 04 00",
  //     "07 07 07 00",
  //     "07 07 08 00",
  //     "07 07 09 00",
  //     "07 07 10 00",
  //     "08 01 21 00",
  //     "08 01 22 00",
  //     "08 02 04 00",
  //     "08 03 16 00",
  //     "08 03 19 00",
  //     "08 04 17 00",
  //     "08 05 01 00",
  //     "09 01 01 00",
  //     "09 01 02 00",
  //     "09 01 03 00",
  //     "09 01 04 00",
  //     "09 01 05 00",
  //     "09 01 06 00",
  //     "09 01 13 00",
  //     "10 01 04 00",
  //     "10 01 09 00",
  //     "10 01 13 00",
  //     "10 02 03 00",
  //     "10 02 16 00",
  //     "10 03 03 00",
  //     "10 03 04 00",
  //     "10 03 05 00",
  //     "10 03 08 00",
  //     "10 03 09 00",
  //     "10 04 03 00",
  //     "10 04 04 00",
  //     "10 04 05 00",
  //     "10 04 06 00",
  //     "10 04 07 00",
  //     "10 05 02 00",
  //     "10 05 05 00",
  //     "10 05 06 00",
  //     "10 05 07 00",
  //     "10 06 06 00",
  //     "10 06 07 00",
  //     "10 08 08 00",
  //     "10 14 01 00",
  //     "11 01 04 00",
  //     "11 01 05 00",
  //     "11 01 06 00",
  //     "11 01 07 00",
  //     "11 01 08 00",
  //     "11 01 15 00",
  //     "11 01 16 00",
  //     "11 02 02 00",
  //     "11 03 01 00",
  //     "11 03 02 00",
  //     "11 03 03 00",
  //     "11 05 02 00",
  //     "11 05 03 00",
  //     "11 05 04 00",
  //     "12 01 06 00",
  //     "12 01 07 00",
  //     "12 01 08 00",
  //     "12 01 09 00",
  //     "12 01 10 00",
  //     "12 01 12 00",
  //     "12 01 18 00",
  //     "12 01 19 00",
  //     "12 03 01 00",
  //     "12 03 02 00",
  //     "13 01 01 00",
  //     "13 01 04 00",
  //     "13 01 05 00",
  //     "13 01 09 00",
  //     "13 01 10 00",
  //     "13 01 11 00",
  //     "13 01 12 00",
  //     "13 01 13 00",
  //     "13 02 01 00",
  //     "13 02 98 00",
  //     "13 03 01 00",
  //     "13 03 06 00",
  //     "13 03 07 00",
  //     "13 03 08 00",
  //     "13 03 09 00",
  //     "13 03 10 00",
  //     "13 04 01 00",
  //     "13 04 02 00",
  //     "13 04 03 00",
  //     "13 05 01 00",
  //     "13 05 02 00",
  //     "13 05 03 00",
  //     "13 05 06 00",
  //     "13 05 07 00",
  //     "13 05 08 00",
  //     "13 07 01 00",
  //     "13 07 02 00",
  //     "13 07 03 00",
  //     "13 08 01 00",
  //     "13 08 02 00",
  //     "13 08 03 00",
  //     "13 08 04 00",
  //     "14 06 01 00",
  //     "14 06 02 00",
  //     "14 06 03 00",
  //     "14 06 04 00",
  //     "14 06 05 00",
  //     "15 01 10 00",
  //     "15 01 11 00",
  //     "15 04 01 01",
  //     "15 04 03 00",
  //     "15 04 04 00",
  //     "15 04 05 00",
  //     "15 04 06 00",
  //     "15 04 07 00",
  //     "15 05 09 00",
  //     "15 05 10 00",
  //     "16 01 03 00",
  //     "16 01 06 00",
  //     "16 01 07 00",
  //     "16 01 08 00",
  //     "16 01 09 00",
  //     "16 01 10 00",
  //     "16 01 13 00",
  //     "16 04 01 00",
  //     "16 04 02 00",
  //     "16 04 03 00",
  //     "16 04 05 00",
  //     "16 04 06 00",
  //     "16 04 98 00",
  //     "16 07 08 00",
  //     "16 08 05 00",
  //     "16 08 06 00",
  //     "16 08 07 00",
  //     "16 08 08 00",
  //     "16 09 01 00",
  //     "16 09 02 00",
  //     "16 09 03 00",
  //     "16 09 04 00",
  //     "17 05 09 00",
  //     "17 06 05 00",
  //     "18 01 01 00",
  //     "18 01 02 00",
  //     "18 01 03 00",
  //     "18 01 04 00",
  //     "18 01 05 00",
  //     "18 01 06 00",
  //     "18 01 07 00",
  //     "18 01 08 00",
  //     "18 01 09 00",
  //     "18 01 10 00",
  //     "18 01 11 00",
  //     "18 01 12 00",
  //     "18 01 13 00",
  //     "18 01 14 00",
  //     "18 01 15 00",
  //     "18 02 01 00",
  //     "18 02 02 00",
  //     "18 02 03 00",
  //     "18 02 04 00",
  //     "18 02 98 00",
  //     "18 03 01 00",
  //     "18 04 01 00",
  //     "19 01 05 00",
  //     "19 01 06 00",
  //     "19 01 07 00",
  //     "19 01 10 00",
  //     "19 02 03 00",
  //     "19 02 04 00",
  //     "19 02 07 00",
  //     "19 04 01 00",
  //     "19 04 02 00",
  //     "19 04 03 00",
  //     "19 05 01 00",
  //     "19 05 02 00",
  //     "19 05 03 00",
  //     "19 06 03 00",
  //     "19 06 04 00",
  //     "19 06 05 00",
  //     "19 06 06 00",
  //     "19 07 04 00",
  //     "19 08 01 00",
  //     "19 08 02 00",
  //     "19 08 05 00",
  //     "19 08 06 00",
  //     "19 08 07 00",
  //     "19 08 08 00",
  //     "19 09 01 00",
  //     "19 09 02 00",
  //     "19 09 03 00",
  //     "19 09 04 00",
  //     "19 09 05 00",
  //     "19 09 06 00",
  //     "19 10 03 00",
  //     "19 11 01 00",
  //     "19 11 02 00",
  //     "19 11 03 00",
  //     "19 11 04 00",
  //     "19 11 07 00",
  //     "19 12 09 00",
  //     "19 12 10 00",
  //     "20 01 42 00",
  //     "20 01 43 00",
  //     "20 01 44 00",
  //     "20 01 45 00",
  //     "20 01 99 00",
  //     "20 02 01 00",
  //     "20 02 02 00",
  //     "20 02 03 00",
  //     "20 03 01 00",
  //     "20 03 02 00",
  //     "20 03 03 00",
  //     "20 03 04 00",
  //     "20 03 06 00",
  //     "20 03 07 00",
  //     "20 03 99 00",
  //   ];

  //   const rpE = [
  //     "01 03 04 00",
  //     "01 03 07 00",
  //     "01 04 07 00",
  //     "01 05 05 00",
  //     "02 01 08 00",
  //     "02 02 04 00",
  //     "02 03 05 00",
  //     "02 04 03 00",
  //     "02 05 02 00",
  //     "02 06 03 00",
  //     "02 07 05 00",
  //     "03 01 04 00",
  //     "04 02 14 00",
  //     "04 02 16 00",
  //     "04 02 19 00",
  //     "05 01 09 00",
  //     "05 01 10 00",
  //     "05 01 13 00",
  //     "05 01 14 00",
  //     "05 01 16 00",
  //     "05 01 17 00",
  //     "05 04 02 00",
  //     "05 05 02 00",
  //     "06 03 10 00",
  //     "06 03 11 00",
  //     "06 03 13 00",
  //     "06 03 15 00",
  //     "06 05 03 00",
  //     "06 06 03 00",
  //     "06 08 03 00",
  //     "06 09 03 00",
  //     "06 10 03 00",
  //     "07 01 11 00",
  //     "07 02 11 00",
  //     "07 02 14 00",
  //     "07 02 16 00",
  //     "07 03 11 00",
  //     "07 04 11 00",
  //     "07 04 13 00",
  //     "07 05 11 00",
  //     "07 05 13 00",
  //     "07 06 11 00",
  //     "07 07 11 00",
  //     "08 01 11 00",
  //     "08 01 13 00",
  //     "08 01 15 00",
  //     "08 01 17 00",
  //     "08 01 19 00",
  //     "08 03 09 00",
  //     "08 03 10 00",
  //     "08 03 12 00",
  //     "08 03 14 00",
  //     "08 03 17 00",
  //     "08 04 09 00",
  //     "08 04 11 00",
  //     "08 04 13 00",
  //     "08 04 15 00",
  //     "09 01 11 00",
  //     "10 01 02 00",
  //     "10 01 14 00",
  //     "10 01 16 00",
  //     "10 01 18 00",
  //     "10 01 20 00",
  //     "10 01 22 00",
  //     "10 01 23 00",
  //     "10 02 07 00",
  //     "10 02 11 00",
  //     "10 02 13 00",
  //     "10 03 15 00",
  //     "10 03 17 00",
  //     "10 03 19 00",
  //     "10 03 21 00",
  //     "10 03 23 00",
  //     "10 03 25 00",
  //     "10 03 27 00",
  //     "10 03 29 00",
  //     "10 04 01 00",
  //     "10 04 02 00",
  //     "10 04 09 00",
  //     "10 05 03 00",
  //     "10 05 10 00",
  //     "10 06 03 00",
  //     "10 06 09 00",
  //     "10 07 07 00",
  //     "10 08 05 00",
  //     "10 08 10 00",
  //     "10 08 12 00",
  //     "10 08 15 00",
  //     "10 08 17 00",
  //     "10 08 19 00",
  //     "10 09 05 00",
  //     "10 09 07 00",
  //     "10 09 09 00",
  //     "10 09 11 00",
  //     "10 09 13 00",
  //     "10 09 15 00",
  //     "10 10 05 00",
  //     "10 10 07 00",
  //     "10 10 09 00",
  //     "10 10 11 00",
  //     "10 10 13 00",
  //     "10 10 15 00",
  //     "10 11 09 00",
  //     "10 11 11 00",
  //     "10 11 13 00",
  //     "10 11 15 00",
  //     "10 11 17 00",
  //     "10 11 19 00",
  //     "10 12 09 00",
  //     "10 12 11 00",
  //     "10 12 12 00",
  //     "10 13 09 00",
  //     "10 13 12 00",
  //     "11 01 09 00",
  //     "11 01 11 00",
  //     "11 01 13 00",
  //     "11 02 05 00",
  //     "11 02 07 00",
  //     "12 01 14 00",
  //     "12 01 16 00",
  //     "15 02 02 00",
  //     "16 01 04 00",
  //     "16 01 11 00",
  //     "16 01 14 00",
  //     "16 01 21 00",
  //     "16 02 09 00",
  //     "16 02 10 00",
  //     "16 02 11 00",
  //     "16 02 12 00",
  //     "16 02 13 00",
  //     "16 02 15 00",
  //     "16 03 03 00",
  //     "16 03 05 00",
  //     "16 03 07 00",
  //     "16 05 04 00",
  //     "16 05 06 00",
  //     "16 05 07 00",
  //     "16 05 08 00",
  //     "16 06 01 00",
  //     "16 06 02 00",
  //     "16 06 03 00",
  //     "16 06 06 00",
  //     "16 07 09 00",
  //     "16 08 02 00",
  //     "16 10 01 00",
  //     "16 10 03 00",
  //     "16 11 01 00",
  //     "16 11 03 00",
  //     "16 11 05 00",
  //     "17 01 06 00",
  //     "17 02 04 00",
  //     "17 03 01 00",
  //     "17 03 03 00",
  //     "17 04 09 00",
  //     "17 04 10 00",
  //     "17 05 03 00",
  //     "17 05 05 00",
  //     "17 05 07 00",
  //     "17 06 01 00",
  //     "17 06 03 00",
  //     "17 08 01 00",
  //     "17 09 01 00",
  //     "17 09 02 00",
  //     "17 09 03 00",
  //     "19 01 11 00",
  //     "19 01 13 00",
  //     "19 01 15 00",
  //     "19 01 17 00",
  //     "19 02 05 00",
  //     "19 02 08 00",
  //     "19 02 09 00",
  //     "19 02 11 00",
  //     "19 03 04 00",
  //     "19 03 06 00",
  //     "19 04 04 00",
  //     "19 07 02 00",
  //     "19 08 10 00",
  //     "19 08 11 00",
  //     "19 08 13 00",
  //     "19 10 05 00",
  //     "19 11 05 00",
  //     "19 12 06 00",
  //     "19 12 11 00",
  //     "19 13 01 00",
  //     "19 13 03 00",
  //     "19 13 05 00",
  //     "19 13 07 00",
  //     "20 01 13 00",
  //     "20 01 14 00",
  //     "20 01 15 00",
  //     "20 01 17 00",
  //     "20 01 19 00",
  //     "20 01 21 00",
  //     "20 01 23 00",
  //     "20 01 26 00",
  //     "20 01 27 00",
  //     "20 01 29 00",
  //     "20 01 31 00",
  //     "20 01 33 00",
  //     "20 01 35 00",
  //     "20 01 37 00",
  //     "20 01 39 00",
  //     "20 01 40 00",
  //     "20 01 41 00",
  //   ];

  //   const rnpU = [
  //     "01 01 01 00",
  //     "01 01 02 00",
  //     "01 01 04 00",
  //     "01 01 05 00",
  //     "01 04 08 00",
  //     "01 04 09 00",
  //     "01 04 10 00",
  //     "01 04 11 00",
  //     "01 04 12 00",
  //     "01 04 13 00",
  //     "01 04 99 00",
  //     "02 01 01 00",
  //     "02 01 02 00",
  //     "02 01 03 00",
  //     "02 01 04 00",
  //     "02 01 06 00",
  //     "02 01 07 00",
  //     "02 01 09 00",
  //     "02 01 10 00",
  //     "02 01 99 00",
  //     "02 02 01 00",
  //     "02 02 02 00",
  //     "02 02 03 00",
  //     "02 02 99 00",
  //     "02 03 01 00",
  //     "02 03 02 00",
  //     "02 03 03 00",
  //     "02 03 04 00",
  //     "02 03 99 00",
  //     "02 04 01 00",
  //     "02 04 02 00",
  //     "02 04 99 00",
  //     "02 05 01 00",
  //     "02 05 99 00",
  //     "02 06 01 00",
  //     "02 06 02 00",
  //     "02 06 99 00",
  //     "02 07 01 00",
  //     "02 07 02 00",
  //     "02 07 03 00",
  //     "02 07 04 00",
  //     "02 07 99 00",
  //     "03 01 01 00",
  //     "03 01 05 00",
  //     "03 01 99 00",
  //     "03 03 01 00",
  //     "03 03 02 00",
  //     "03 03 05 00",
  //     "03 03 07 00",
  //     "03 03 08 00",
  //     "03 03 09 00",
  //     "03 03 10 00",
  //     "03 03 11 00",
  //     "03 03 99 00",
  //     "04 01 01 00",
  //     "04 01 02 00",
  //     "04 01 04 00",
  //     "04 01 05 00",
  //     "04 01 06 00",
  //     "04 01 07 00",
  //     "04 01 08 00",
  //     "04 01 09 00",
  //     "04 01 99 00",
  //     "04 02 09 00",
  //     "04 02 10 00",
  //     "04 02 15 00",
  //     "04 02 17 00",
  //     "04 02 20 00",
  //     "04 02 21 00",
  //     "04 02 22 00",
  //     "04 02 99 00",
  //     "05 01 19 00",
  //     "06 05 02 00",
  //     "06 06 02 00",
  //     "06 09 02 00",
  //     "06 09 04 00",
  //     "06 10 02 00",
  //     "06 11 01 00",
  //     "06 13 03 00",
  //     "07 02 12 00",
  //     "07 02 13 00",
  //     "07 02 15 00",
  //     "07 02 17 00",
  //     "07 02 99 00",
  //     "08 01 12 00",
  //     "08 01 14 00",
  //     "08 01 16 00",
  //     "08 01 18 00",
  //     "08 01 20 00",
  //     "08 01 99 00",
  //     "08 02 01 00",
  //     "08 02 02 00",
  //     "08 02 03 00",
  //     "08 02 99 00",
  //     "08 03 03 00",
  //     "08 03 07 00",
  //     "08 03 08 00",
  //     "08 03 11 00",
  //     "08 03 13 00",
  //     "08 03 15 00",
  //     "08 03 18 00",
  //     "08 03 99 00",
  //     "08 04 10 00",
  //     "08 04 12 00",
  //     "08 04 14 00",
  //     "08 04 16 00",
  //     "08 04 99 00",
  //     "09 01 07 00",
  //     "09 01 08 00",
  //     "09 01 10 00",
  //     "09 01 12 00",
  //     "09 01 99 00",
  //     "10 01 01 00",
  //     "10 01 03 00",
  //     "10 01 05 00",
  //     "10 01 07 00",
  //     "10 01 15 00",
  //     "10 01 17 00",
  //     "10 01 19 00",
  //     "10 01 21 00",
  //     "10 01 24 00",
  //     "10 01 25 00",
  //     "10 01 26 00",
  //     "10 01 50 00",
  //     "10 01 51 00",
  //     "10 01 99 00",
  //     "10 02 01 00",
  //     "10 02 02 00",
  //     "10 02 08 00",
  //     "10 02 10 00",
  //     "10 02 12 00",
  //     "10 02 14 00",
  //     "10 02 15 00",
  //     "10 02 99 00",
  //     "10 03 02 00",
  //     "10 03 16 00",
  //     "10 03 18 00",
  //     "10 03 20 00",
  //     "10 03 22 00",
  //     "10 03 24 00",
  //     "10 03 26 00",
  //     "10 03 28 00",
  //     "10 03 30 00",
  //     "10 03 99 00",
  //     "10 04 10 00",
  //     "10 04 99 00",
  //     "10 05 01 00",
  //     "10 05 04 00",
  //     "10 05 09 00",
  //     "10 05 11 00",
  //     "10 05 99 00",
  //     "10 06 01 00",
  //     "10 06 02 00",
  //     "10 06 04 00",
  //     "10 06 10 00",
  //     "10 06 99 00",
  //     "10 07 01 00",
  //     "10 07 02 00",
  //     "10 07 03 00",
  //     "10 07 04 00",
  //     "10 07 05 00",
  //     "10 07 08 00",
  //     "10 07 99 00",
  //     "10 08 04 00",
  //     "10 08 09 00",
  //     "10 08 11 00",
  //     "10 08 13 00",
  //     "10 08 14 00",
  //     "10 08 16 00",
  //     "10 08 18 00",
  //     "10 08 20 00",
  //     "10 08 99 00",
  //     "10 09 03 00",
  //     "10 09 06 00",
  //     "10 09 08 00",
  //     "10 09 10 00",
  //     "10 09 12 00",
  //     "10 09 14 00",
  //     "10 09 16 00",
  //     "10 09 99 00",
  //     "10 10 03 00",
  //     "10 10 06 00",
  //     "10 10 08 00",
  //     "10 10 10 00",
  //     "10 10 12 00",
  //     "10 10 14 00",
  //     "10 10 16 00",
  //     "10 10 99 00",
  //     "10 11 03 00",
  //     "10 11 05 00",
  //     "10 11 10 00",
  //     "10 11 12 00",
  //     "10 11 14 00",
  //     "10 11 16 00",
  //     "10 11 18 00",
  //     "10 11 20 00",
  //     "10 11 99 00",
  //     "10 12 01 00",
  //     "10 12 03 00",
  //     "10 12 05 00",
  //     "10 12 06 00",
  //     "10 12 08 00",
  //     "10 12 10 00",
  //     "10 12 13 00",
  //     "10 12 99 00",
  //     "10 13 01 00",
  //     "10 13 04 00",
  //     "10 13 06 00",
  //     "10 13 07 00",
  //     "10 13 10 00",
  //     "10 13 11 00",
  //     "10 13 13 00",
  //     "10 13 14 00",
  //     "10 13 99 00",
  //     "10 99 01 00",
  //     "11 01 98 00",
  //     "11 01 99 00",
  //     "12 01 01 00",
  //     "12 01 02 00",
  //     "12 01 03 00",
  //     "12 01 04 00",
  //     "12 01 05 00",
  //     "12 01 13 00",
  //     "12 01 15 00",
  //     "12 01 17 00",
  //     "12 01 20 00",
  //     "12 01 21 00",
  //     "12 01 99 00",
  //     "15 01 01 00",
  //     "15 01 02 00",
  //     "15 01 03 00",
  //     "15 01 04 00",
  //     "15 01 05 00",
  //     "15 01 06 00",
  //     "15 01 07 00",
  //     "15 01 09 00",
  //     "15 01 12 00",
  //     "15 02 03 00",
  //     "15 03 01 00",
  //     "15 03 02 00",
  //     "15 03 03 00",
  //     "15 03 04 00",
  //     "15 03 05 00",
  //     "15 03 06 00",
  //     "15 03 07 00",
  //     "15 03 08 00",
  //     "15 03 09 00",
  //     "15 03 10 00",
  //     "15 04 02 00",
  //     "15 05 01 00",
  //     "15 05 02 00",
  //     "15 05 03 00",
  //     "15 05 04 00",
  //     "15 05 05 00",
  //     "15 05 06 00",
  //     "15 05 07 00",
  //     "15 05 08 00",
  //     "15 05 11 00",
  //     "16 01 01 00",
  //     "16 01 02 00",
  //     "16 01 05 00",
  //     "16 01 12 00",
  //     "16 01 15 00",
  //     "16 01 16 00",
  //     "16 01 17 00",
  //     "16 01 18 00",
  //     "16 01 19 00",
  //     "16 01 20 00",
  //     "16 01 22 00",
  //     "16 01 99 00",
  //     "16 02 14 00",
  //     "16 02 16 00",
  //     "16 03 04 00",
  //     "16 03 06 00",
  //     "16 03 08 00",
  //     "16 03 80 00",
  //     "16 05 05 00",
  //     "16 05 09 00",
  //     "16 06 04 00",
  //     "16 06 05 00",
  //     "16 08 01 00",
  //     "16 08 03 00",
  //     "16 08 04 00",
  //     "16 10 02 00",
  //     "16 10 04 00",
  //     "16 11 02 00",
  //     "16 11 04 00",
  //     "16 11 06 00",
  //     "17 01 01 00",
  //     "17 01 02 00",
  //     "17 01 03 00",
  //     "17 01 07 00",
  //     "17 01 08 00",
  //     "17 02 01 00",
  //     "17 02 02 00",
  //     "17 02 03 00",
  //     "17 03 02 00",
  //     "17 04 01 00",
  //     "17 04 02 00",
  //     "17 04 03 00",
  //     "17 04 04 00",
  //     "17 04 05 00",
  //     "17 04 06 00",
  //     "17 04 07 00",
  //     "17 04 11 00",
  //     "17 05 04 00",
  //     "17 05 06 00",
  //     "17 05 08 00",
  //     "17 05 10 00",
  //     "17 06 04 00",
  //     "17 08 02 00",
  //     "17 09 04 00",
  //     "19 01 02 00",
  //     "19 01 12 00",
  //     "19 01 14 00",
  //     "19 01 16 00",
  //     "19 01 18 00",
  //     "19 01 19 00",
  //     "19 01 99 00",
  //     "19 02 03 00",
  //     "19 02 06 00",
  //     "19 02 10 00",
  //     "19 02 99 00",
  //     "19 03 05 00",
  //     "19 03 07 00",
  //     "19 03 99 00",
  //     "19 05 99 00",
  //     "19 07 03 00",
  //     "19 08 09 00",
  //     "19 08 12 00",
  //     "19 08 14 00",
  //     "19 08 99 00",
  //     "19 10 01 00",
  //     "19 10 02 00",
  //     "19 10 04 00",
  //     "19 10 06 00",
  //     "19 12 01 00",
  //     "19 12 02 00",
  //     "19 12 03 00",
  //     "19 12 04 00",
  //     "19 12 05 00",
  //     "19 12 07 00",
  //     "19 12 08 00",
  //     "19 12 12 00",
  //     "19 13 02 00",
  //     "19 13 04 00",
  //     "19 13 06 00",
  //     "19 13 08 00",
  //     "20 01 01 00",
  //     "20 01 02 00",
  //     "20 01 08 00",
  //     "20 01 10 00",
  //     "20 01 11 00",
  //     "20 01 25 00",
  //     "20 01 28 00",
  //     "20 01 30 00",
  //     "20 01 32 00",
  //     "20 01 34 00",
  //     "20 01 36 00",
  //     "20 01 38 00",
  //   ];

  //   const rnpE = [
  //     "01 03 05 00",
  //     "01 05 06 00",
  //     "03 02 05 00",
  //     "04 02 13 00",
  //     "04 02 18 00",
  //     "05 01 10 01",
  //     "06 03 12 00",
  //     "06 03 14 00",
  //     "06 03 16 00",
  //     "06 03 17 00",
  //     "06 03 18 00",
  //     "06 03 19 00",
  //     "06 08 02 00",
  //     "06 13 06 00",
  //     "06 13 07 00",
  //     "07 01 12 00",
  //     "07 02 10 01",
  //     "07 03 12 00",
  //     "07 04 12 00",
  //     "07 05 12 00",
  //     "07 05 14 00",
  //     "07 06 12 00",
  //     "07 07 12 00",
  //     "08 03 02 00",
  //     "10 01 06 00",
  //     "10 02 04 00",
  //     "10 02 05 00",
  //     "10 02 06 00",
  //     "10 02 09 00",
  //     "10 02 17 00",
  //     "10 02 18 00",
  //     "10 02 19 00",
  //     "10 02 20 00",
  //     "10 07 06 00",
  //     "11 01 10 00",
  //     "11 01 12 00",
  //     "11 01 14 00",
  //     "11 02 03 00",
  //     "11 02 06 00",
  //     "11 05 01 00",
  //     "15 04 08 00",
  //     "16 01 23 00",
  //     "16 01 24 00",
  //     "16 01 25 00",
  //     "16 01 26 00",
  //     "16 01 27 00",
  //     "16 01 28 00",
  //     "16 01 29 00",
  //     "16 01 30 00",
  //     "16 02 02 00",
  //     "16 02 03 00",
  //     "16 02 04 00",
  //     "16 02 05 00",
  //     "16 02 06 00",
  //     "16 02 07 00",
  //     "16 02 08 00",
  //     "16 03 01 00",
  //     "16 03 02 00",
  //     "16 08 09 00",
  //     "16 08 10 00",
  //     "17 01 04 00",
  //     "17 01 05 00",
  //     "17 02 05 00",
  //     "17 02 06 00",
  //     "17 02 07 00",
  //     "17 02 08 00",
  //     "17 02 09 00",
  //     "17 02 10 00",
  //     "17 02 11 00",
  //     "17 02 12 00",
  //     "17 02 13 00",
  //     "17 02 14 00",
  //     "17 02 15 00",
  //     "17 02 16 00",
  //     "17 02 17 00",
  //     "17 02 18 00",
  //     "17 02 19 00",
  //     "17 02 20 00",
  //     "17 02 21 00",
  //     "17 02 22 00",
  //     "17 02 23 00",
  //     "17 02 24 00",
  //     "17 02 25 00",
  //     "17 02 26 00",
  //     "17 02 27 00",
  //     "17 02 28 00",
  //     "17 02 29 00",
  //     "17 02 30 00",
  //     "17 02 31 00",
  //     "17 02 32 00",
  //     "17 02 33 00",
  //     "17 02 34 00",
  //     "17 02 35 00",
  //     "17 02 36 00",
  //     "17 02 37 00",
  //     "17 02 38 00",
  //     "17 02 39 00",
  //     "17 02 40 00",
  //     "17 02 41 00",
  //     "17 02 42 00",
  //     "17 02 43 00",
  //     "17 02 44 00",
  //     "17 02 45 00",
  //     "17 02 46 00",
  //     "17 02 47 00",
  //     "17 02 48 00",
  //     "17 02 49 00",
  //     "17 02 50 00",
  //     "17 02 51 00",
  //     "17 02 52 00",
  //     "17 02 53 00",
  //     "17 02 54 00",
  //     "17 02 55 00",
  //     "17 02 56 00",
  //     "17 02 57 00",
  //     "17 02 58 00",
  //     "17 02 59 00",
  //     "17 02 60 00",
  //     "17 02 61 00",
  //     "17 02 62 00",
  //     "17 02 63 00",
  //     "17 02 64 00",
  //     "17 02 65 00",
  //     "17 02 66 00",
  //     "17 02 67 00",
  //     "17 02 68 00",
  //     "17 02 69 00",
  //     "17 02 70 00",
  //     "17 02 71 00",
  //     "17 02 72 00",
  //     "17 02 73 00",
  //     "17 02 74 00",
  //     "17 02 75 00",
  //     "17 02 76 00",
  //     "17 02 77 00",
  //     "17 02 78 00",
  //     "17 02 79 00",
  //     "17 02 80 00",
  //     "17 02 81 00",
  //     "17 02 82 00",
  //     "17 02 83 00",
  //     "17 02 84 00",
  //     "17 02 85 00",
  //     "17 02 86 00",
  //     "17 02 87 00",
  //     "17 02 88 00",
  //     "17 02 89 00",
  //     "17 02 90 00",
  //     "17 02 91 00",
  //     "17 02 92 00",
  //     "17 02 93 00",
  //     "17 02 94 00",
  //     "17 02 95 00",
  //     "17 02 96 00",
  //     "17 02 97 00",
  //     "17 02 98 00",
  //     "19 02 02 00",
  //     "19 12 09 01",
  //   ];

  //   if (
  //     !rpU.includes(sample.type) &&
  //     !rnpU.includes(sample.type) &&
  //     !rpE.includes(sample.type) &&
  //     !rnpE.includes(sample.type)
  //   ) {
  //     req.flash("message", "Código inexistente!");
  //     req.session.save(() => {
  //       res.redirect(`/sample/step1/${sample.id}`);
  //     });
  //     return;
  //   }

  //   const user = await User.findOne({ where: { id: req.session.userid } });

  //   if (rpU.includes(sample.type)) {
  //     sample.inputType = "U";
  //     sample.classification = "RP";

  //     sample.responsible = user.name;

  //     await Sample.update(sample, { where: { id: sample.id } });

  //     res.redirect(`/project/${sample.ProjectId}/samples`);
  //   } else if (rnpU.includes(sample.type)) {
  //     sample.inputType = "U";
  //     sample.classification = "RNP";

  //     sample.responsible = user.name;

  //     await Sample.update(sample, { where: { id: sample.id } });

  //     res.redirect(`/project/${sample.ProjectId}/samples`);
  //   } else {
  //     sample.inputType = "E";

  //     sample.responsible = user.name;

  //     await Sample.update(sample, { where: { id: sample.id } });
  //     res.redirect(`/sample/step2/${sample.id}`);
  //   }
  // }

  // static async step2Get(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });
  //   res.render("sample/step2", { sample });
  // }

  // static async step2Post(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });

  //   const q11 = req.body.q11;
  //   const q12Select = req.body.q12Select;

  //   if (q11 === "yes" && q12Select === "yes") {
  //     sample.classification = "RP";
  //     await Sample.update(sample, { where: { id: sample.id } });
  //     res.redirect(`/project/${sample.ProjectId}/samples`);
  //   } else if (q11 === "no" || q12Select === "no") {
  //     res.redirect(`/sample/step3/${sample.id}`);
  //   }
  // }

  // static async step3Get(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });
  //   res.render("sample/step3", { sample });
  // }

  // static async step3Post(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });

  //   const q11 = req.body.q11;
  //   const q12Select = req.body.q12Select;
  //   const q13Select = req.body.q13Select;
  //   const q14Select = req.body.q14Select;

  //   if (
  //     q11 === "yes" ||
  //     q12Select === "yes" ||
  //     q13Select === "yes" ||
  //     q14Select === "yes"
  //   ) {
  //     sample.classification = "RP";
  //     await Sample.update(sample, { where: { id: sample.id } });
  //     res.redirect(`/project/${sample.ProjectId}/samples`);
  //   } else {
  //     res.redirect(`/sample/step4/${sample.id}`);
  //   }
  // }

  // static async step4Get(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });
  //   res.render("sample/step4", { sample });
  // }

  // static async step4Post(req, res) {
  //   const sample = await Sample.findOne({
  //     raw: true,
  //     where: { id: req.params.id },
  //   });

  //   const q11 = req.body.q11;

  //   if (q11 === "yes") {
  //     sample.classification = "RP";
  //     await Sample.update(sample, { where: { id: sample.id } });
  //     res.redirect(`/project/${sample.ProjectId}/samples`);
  //   } else {
  //     sample.classification = "RNP";
  //     await Sample.update(sample, { where: { id: sample.id } });
  //     res.redirect(`/project/${sample.ProjectId}/samples`);
  //   }
  // }

  static async classification(req, res) {
    const rpU = [
      "01 01 06 00",
      "02 01 11 00",
      "03 02 01 00",
      "03 02 02 00",
      "03 02 03 00",
      "03 02 04 00",
      "03 02 06 00",
      "03 02 07 00",
      "03 02 08 00",
      "04 01 03 00",
      "05 01 02 00",
      "05 01 03 00",
      "05 01 04 00",
      "05 01 05 00",
      "05 01 06 00",
      "05 01 07 00",
      "05 01 08 00",
      "05 01 11 00",
      "05 01 12 00",
      "05 01 15 00",
      "05 01 18 00",
      "05 06 01 00",
      "05 06 03 00",
      "05 06 05 00",
      "05 06 06 00",
      "05 06 07 00",
      "05 06 08 00",
      "05 07 01 00",
      "06 01 01 00",
      "06 01 02 00",
      "06 01 03 00",
      "06 01 04 00",
      "06 01 05 00",
      "06 01 06 00",
      "06 02 01 00",
      "06 02 03 00",
      "06 02 04 00",
      "06 02 05 00",
      "06 04 03 00",
      "06 04 04 00",
      "06 04 05 00",
      "06 07 01 00",
      "06 07 02 00",
      "06 07 03 00",
      "06 07 04 00",
      "06 07 05 00",
      "06 11 02 00",
      "06 11 03 00",
      "06 11 04 00",
      "06 13 01 00",
      "06 13 02 00",
      "06 13 04 00",
      "06 13 05 00",
      "07 01 01 00",
      "07 01 03 00",
      "07 01 04 00",
      "07 01 07 00",
      "07 01 08 00",
      "07 01 09 00",
      "07 01 10 00",
      "07 02 01 00",
      "07 02 03 00",
      "07 02 04 00",
      "07 02 07 00",
      "07 02 08 00",
      "07 02 09 00",
      "07 02 10 00",
      "07 03 01 00",
      "07 03 03 00",
      "07 03 04 00",
      "07 03 07 00",
      "07 03 08 00",
      "07 03 09 00",
      "07 03 10 00",
      "07 04 01 00",
      "07 04 03 00",
      "07 04 04 00",
      "07 04 07 00",
      "07 04 08 00",
      "07 04 09 00",
      "07 04 10 00",
      "07 05 01 00",
      "07 05 03 00",
      "07 05 04 00",
      "07 05 05 00",
      "07 05 06 00",
      "07 05 07 00",
      "07 05 08 00",
      "07 05 09 00",
      "07 05 10 00",
      "07 06 01 00",
      "07 06 03 00",
      "07 06 04 00",
      "07 06 07 00",
      "07 06 08 00",
      "07 06 09 00",
      "07 06 10 00",
      "07 07 01 00",
      "07 07 03 00",
      "07 07 04 00",
      "07 07 07 00",
      "07 07 08 00",
      "07 07 09 00",
      "07 07 10 00",
      "08 01 21 00",
      "08 01 22 00",
      "08 02 04 00",
      "08 03 16 00",
      "08 03 19 00",
      "08 04 17 00",
      "08 05 01 00",
      "09 01 01 00",
      "09 01 02 00",
      "09 01 03 00",
      "09 01 04 00",
      "09 01 05 00",
      "09 01 06 00",
      "09 01 13 00",
      "10 01 04 00",
      "10 01 09 00",
      "10 01 13 00",
      "10 02 03 00",
      "10 02 16 00",
      "10 03 03 00",
      "10 03 04 00",
      "10 03 05 00",
      "10 03 08 00",
      "10 03 09 00",
      "10 04 03 00",
      "10 04 04 00",
      "10 04 05 00",
      "10 04 06 00",
      "10 04 07 00",
      "10 05 02 00",
      "10 05 05 00",
      "10 05 06 00",
      "10 05 07 00",
      "10 06 06 00",
      "10 06 07 00",
      "10 08 08 00",
      "10 14 01 00",
      "11 01 04 00",
      "11 01 05 00",
      "11 01 06 00",
      "11 01 07 00",
      "11 01 08 00",
      "11 01 15 00",
      "11 01 16 00",
      "11 02 02 00",
      "11 03 01 00",
      "11 03 02 00",
      "11 03 03 00",
      "11 05 02 00",
      "11 05 03 00",
      "11 05 04 00",
      "12 01 06 00",
      "12 01 07 00",
      "12 01 08 00",
      "12 01 09 00",
      "12 01 10 00",
      "12 01 12 00",
      "12 01 18 00",
      "12 01 19 00",
      "12 03 01 00",
      "12 03 02 00",
      "13 01 01 00",
      "13 01 04 00",
      "13 01 05 00",
      "13 01 09 00",
      "13 01 10 00",
      "13 01 11 00",
      "13 01 12 00",
      "13 01 13 00",
      "13 02 01 00",
      "13 02 98 00",
      "13 03 01 00",
      "13 03 06 00",
      "13 03 07 00",
      "13 03 08 00",
      "13 03 09 00",
      "13 03 10 00",
      "13 04 01 00",
      "13 04 02 00",
      "13 04 03 00",
      "13 05 01 00",
      "13 05 02 00",
      "13 05 03 00",
      "13 05 06 00",
      "13 05 07 00",
      "13 05 08 00",
      "13 07 01 00",
      "13 07 02 00",
      "13 07 03 00",
      "13 08 01 00",
      "13 08 02 00",
      "13 08 03 00",
      "13 08 04 00",
      "14 06 01 00",
      "14 06 02 00",
      "14 06 03 00",
      "14 06 04 00",
      "14 06 05 00",
      "15 01 10 00",
      "15 01 11 00",
      "15 04 01 01",
      "15 04 03 00",
      "15 04 04 00",
      "15 04 05 00",
      "15 04 06 00",
      "15 04 07 00",
      "15 05 09 00",
      "15 05 10 00",
      "16 01 03 00",
      "16 01 06 00",
      "16 01 07 00",
      "16 01 08 00",
      "16 01 09 00",
      "16 01 10 00",
      "16 01 13 00",
      "16 04 01 00",
      "16 04 02 00",
      "16 04 03 00",
      "16 04 05 00",
      "16 04 06 00",
      "16 04 98 00",
      "16 07 08 00",
      "16 08 05 00",
      "16 08 06 00",
      "16 08 07 00",
      "16 08 08 00",
      "16 09 01 00",
      "16 09 02 00",
      "16 09 03 00",
      "16 09 04 00",
      "17 05 09 00",
      "17 06 05 00",
      "18 01 01 00",
      "18 01 02 00",
      "18 01 03 00",
      "18 01 04 00",
      "18 01 05 00",
      "18 01 06 00",
      "18 01 07 00",
      "18 01 08 00",
      "18 01 09 00",
      "18 01 10 00",
      "18 01 11 00",
      "18 01 12 00",
      "18 01 13 00",
      "18 01 14 00",
      "18 01 15 00",
      "18 02 01 00",
      "18 02 02 00",
      "18 02 03 00",
      "18 02 04 00",
      "18 02 98 00",
      "18 03 01 00",
      "18 04 01 00",
      "19 01 05 00",
      "19 01 06 00",
      "19 01 07 00",
      "19 01 10 00",
      "19 02 03 00",
      "19 02 04 00",
      "19 02 07 00",
      "19 04 01 00",
      "19 04 02 00",
      "19 04 03 00",
      "19 05 01 00",
      "19 05 02 00",
      "19 05 03 00",
      "19 06 03 00",
      "19 06 04 00",
      "19 06 05 00",
      "19 06 06 00",
      "19 07 04 00",
      "19 08 01 00",
      "19 08 02 00",
      "19 08 05 00",
      "19 08 06 00",
      "19 08 07 00",
      "19 08 08 00",
      "19 09 01 00",
      "19 09 02 00",
      "19 09 03 00",
      "19 09 04 00",
      "19 09 05 00",
      "19 09 06 00",
      "19 10 03 00",
      "19 11 01 00",
      "19 11 02 00",
      "19 11 03 00",
      "19 11 04 00",
      "19 11 07 00",
      "19 12 09 00",
      "19 12 10 00",
      "20 01 42 00",
      "20 01 43 00",
      "20 01 44 00",
      "20 01 45 00",
      "20 01 99 00",
      "20 02 01 00",
      "20 02 02 00",
      "20 02 03 00",
      "20 03 01 00",
      "20 03 02 00",
      "20 03 03 00",
      "20 03 04 00",
      "20 03 06 00",
      "20 03 07 00",
      "20 03 99 00",
    ];

    const rpE = [
      "01 03 04 00",
      "01 03 07 00",
      "01 04 07 00",
      "01 05 05 00",
      "02 01 08 00",
      "02 02 04 00",
      "02 03 05 00",
      "02 04 03 00",
      "02 05 02 00",
      "02 06 03 00",
      "02 07 05 00",
      "03 01 04 00",
      "04 02 14 00",
      "04 02 16 00",
      "04 02 19 00",
      "05 01 09 00",
      "05 01 10 00",
      "05 01 13 00",
      "05 01 14 00",
      "05 01 16 00",
      "05 01 17 00",
      "05 04 02 00",
      "05 05 02 00",
      "06 03 10 00",
      "06 03 11 00",
      "06 03 13 00",
      "06 03 15 00",
      "06 05 03 00",
      "06 06 03 00",
      "06 08 03 00",
      "06 09 03 00",
      "06 10 03 00",
      "07 01 11 00",
      "07 02 11 00",
      "07 02 14 00",
      "07 02 16 00",
      "07 03 11 00",
      "07 04 11 00",
      "07 04 13 00",
      "07 05 11 00",
      "07 05 13 00",
      "07 06 11 00",
      "07 07 11 00",
      "08 01 11 00",
      "08 01 13 00",
      "08 01 15 00",
      "08 01 17 00",
      "08 01 19 00",
      "08 03 09 00",
      "08 03 10 00",
      "08 03 12 00",
      "08 03 14 00",
      "08 03 17 00",
      "08 04 09 00",
      "08 04 11 00",
      "08 04 13 00",
      "08 04 15 00",
      "09 01 11 00",
      "10 01 02 00",
      "10 01 14 00",
      "10 01 16 00",
      "10 01 18 00",
      "10 01 20 00",
      "10 01 22 00",
      "10 01 23 00",
      "10 02 07 00",
      "10 02 11 00",
      "10 02 13 00",
      "10 03 15 00",
      "10 03 17 00",
      "10 03 19 00",
      "10 03 21 00",
      "10 03 23 00",
      "10 03 25 00",
      "10 03 27 00",
      "10 03 29 00",
      "10 04 01 00",
      "10 04 02 00",
      "10 04 09 00",
      "10 05 03 00",
      "10 05 10 00",
      "10 06 03 00",
      "10 06 09 00",
      "10 07 07 00",
      "10 08 05 00",
      "10 08 10 00",
      "10 08 12 00",
      "10 08 15 00",
      "10 08 17 00",
      "10 08 19 00",
      "10 09 05 00",
      "10 09 07 00",
      "10 09 09 00",
      "10 09 11 00",
      "10 09 13 00",
      "10 09 15 00",
      "10 10 05 00",
      "10 10 07 00",
      "10 10 09 00",
      "10 10 11 00",
      "10 10 13 00",
      "10 10 15 00",
      "10 11 09 00",
      "10 11 11 00",
      "10 11 13 00",
      "10 11 15 00",
      "10 11 17 00",
      "10 11 19 00",
      "10 12 09 00",
      "10 12 11 00",
      "10 12 12 00",
      "10 13 09 00",
      "10 13 12 00",
      "11 01 09 00",
      "11 01 11 00",
      "11 01 13 00",
      "11 02 05 00",
      "11 02 07 00",
      "12 01 14 00",
      "12 01 16 00",
      "15 02 02 00",
      "16 01 04 00",
      "16 01 11 00",
      "16 01 14 00",
      "16 01 21 00",
      "16 02 09 00",
      "16 02 10 00",
      "16 02 11 00",
      "16 02 12 00",
      "16 02 13 00",
      "16 02 15 00",
      "16 03 03 00",
      "16 03 05 00",
      "16 03 07 00",
      "16 05 04 00",
      "16 05 06 00",
      "16 05 07 00",
      "16 05 08 00",
      "16 06 01 00",
      "16 06 02 00",
      "16 06 03 00",
      "16 06 06 00",
      "16 07 09 00",
      "16 08 02 00",
      "16 10 01 00",
      "16 10 03 00",
      "16 11 01 00",
      "16 11 03 00",
      "16 11 05 00",
      "17 01 06 00",
      "17 02 04 00",
      "17 03 01 00",
      "17 03 03 00",
      "17 04 09 00",
      "17 04 10 00",
      "17 05 03 00",
      "17 05 05 00",
      "17 05 07 00",
      "17 06 01 00",
      "17 06 03 00",
      "17 08 01 00",
      "17 09 01 00",
      "17 09 02 00",
      "17 09 03 00",
      "19 01 11 00",
      "19 01 13 00",
      "19 01 15 00",
      "19 01 17 00",
      "19 02 05 00",
      "19 02 08 00",
      "19 02 09 00",
      "19 02 11 00",
      "19 03 04 00",
      "19 03 06 00",
      "19 04 04 00",
      "19 07 02 00",
      "19 08 10 00",
      "19 08 11 00",
      "19 08 13 00",
      "19 10 05 00",
      "19 11 05 00",
      "19 12 06 00",
      "19 12 11 00",
      "19 13 01 00",
      "19 13 03 00",
      "19 13 05 00",
      "19 13 07 00",
      "20 01 13 00",
      "20 01 14 00",
      "20 01 15 00",
      "20 01 17 00",
      "20 01 19 00",
      "20 01 21 00",
      "20 01 23 00",
      "20 01 26 00",
      "20 01 27 00",
      "20 01 29 00",
      "20 01 31 00",
      "20 01 33 00",
      "20 01 35 00",
      "20 01 37 00",
      "20 01 39 00",
      "20 01 40 00",
      "20 01 41 00",
    ];

    const rnpU = [
      "01 01 01 00",
      "01 01 02 00",
      "01 01 04 00",
      "01 01 05 00",
      "01 04 08 00",
      "01 04 09 00",
      "01 04 10 00",
      "01 04 11 00",
      "01 04 12 00",
      "01 04 13 00",
      "01 04 99 00",
      "02 01 01 00",
      "02 01 02 00",
      "02 01 03 00",
      "02 01 04 00",
      "02 01 06 00",
      "02 01 07 00",
      "02 01 09 00",
      "02 01 10 00",
      "02 01 99 00",
      "02 02 01 00",
      "02 02 02 00",
      "02 02 03 00",
      "02 02 99 00",
      "02 03 01 00",
      "02 03 02 00",
      "02 03 03 00",
      "02 03 04 00",
      "02 03 99 00",
      "02 04 01 00",
      "02 04 02 00",
      "02 04 99 00",
      "02 05 01 00",
      "02 05 99 00",
      "02 06 01 00",
      "02 06 02 00",
      "02 06 99 00",
      "02 07 01 00",
      "02 07 02 00",
      "02 07 03 00",
      "02 07 04 00",
      "02 07 99 00",
      "03 01 01 00",
      "03 01 05 00",
      "03 01 99 00",
      "03 03 01 00",
      "03 03 02 00",
      "03 03 05 00",
      "03 03 07 00",
      "03 03 08 00",
      "03 03 09 00",
      "03 03 10 00",
      "03 03 11 00",
      "03 03 99 00",
      "04 01 01 00",
      "04 01 02 00",
      "04 01 04 00",
      "04 01 05 00",
      "04 01 06 00",
      "04 01 07 00",
      "04 01 08 00",
      "04 01 09 00",
      "04 01 99 00",
      "04 02 09 00",
      "04 02 10 00",
      "04 02 15 00",
      "04 02 17 00",
      "04 02 20 00",
      "04 02 21 00",
      "04 02 22 00",
      "04 02 99 00",
      "05 01 19 00",
      "06 05 02 00",
      "06 06 02 00",
      "06 09 02 00",
      "06 09 04 00",
      "06 10 02 00",
      "06 11 01 00",
      "06 13 03 00",
      "07 02 12 00",
      "07 02 13 00",
      "07 02 15 00",
      "07 02 17 00",
      "07 02 99 00",
      "08 01 12 00",
      "08 01 14 00",
      "08 01 16 00",
      "08 01 18 00",
      "08 01 20 00",
      "08 01 99 00",
      "08 02 01 00",
      "08 02 02 00",
      "08 02 03 00",
      "08 02 99 00",
      "08 03 03 00",
      "08 03 07 00",
      "08 03 08 00",
      "08 03 11 00",
      "08 03 13 00",
      "08 03 15 00",
      "08 03 18 00",
      "08 03 99 00",
      "08 04 10 00",
      "08 04 12 00",
      "08 04 14 00",
      "08 04 16 00",
      "08 04 99 00",
      "09 01 07 00",
      "09 01 08 00",
      "09 01 10 00",
      "09 01 12 00",
      "09 01 99 00",
      "10 01 01 00",
      "10 01 03 00",
      "10 01 05 00",
      "10 01 07 00",
      "10 01 15 00",
      "10 01 17 00",
      "10 01 19 00",
      "10 01 21 00",
      "10 01 24 00",
      "10 01 25 00",
      "10 01 26 00",
      "10 01 50 00",
      "10 01 51 00",
      "10 01 99 00",
      "10 02 01 00",
      "10 02 02 00",
      "10 02 08 00",
      "10 02 10 00",
      "10 02 12 00",
      "10 02 14 00",
      "10 02 15 00",
      "10 02 99 00",
      "10 03 02 00",
      "10 03 16 00",
      "10 03 18 00",
      "10 03 20 00",
      "10 03 22 00",
      "10 03 24 00",
      "10 03 26 00",
      "10 03 28 00",
      "10 03 30 00",
      "10 03 99 00",
      "10 04 10 00",
      "10 04 99 00",
      "10 05 01 00",
      "10 05 04 00",
      "10 05 09 00",
      "10 05 11 00",
      "10 05 99 00",
      "10 06 01 00",
      "10 06 02 00",
      "10 06 04 00",
      "10 06 10 00",
      "10 06 99 00",
      "10 07 01 00",
      "10 07 02 00",
      "10 07 03 00",
      "10 07 04 00",
      "10 07 05 00",
      "10 07 08 00",
      "10 07 99 00",
      "10 08 04 00",
      "10 08 09 00",
      "10 08 11 00",
      "10 08 13 00",
      "10 08 14 00",
      "10 08 16 00",
      "10 08 18 00",
      "10 08 20 00",
      "10 08 99 00",
      "10 09 03 00",
      "10 09 06 00",
      "10 09 08 00",
      "10 09 10 00",
      "10 09 12 00",
      "10 09 14 00",
      "10 09 16 00",
      "10 09 99 00",
      "10 10 03 00",
      "10 10 06 00",
      "10 10 08 00",
      "10 10 10 00",
      "10 10 12 00",
      "10 10 14 00",
      "10 10 16 00",
      "10 10 99 00",
      "10 11 03 00",
      "10 11 05 00",
      "10 11 10 00",
      "10 11 12 00",
      "10 11 14 00",
      "10 11 16 00",
      "10 11 18 00",
      "10 11 20 00",
      "10 11 99 00",
      "10 12 01 00",
      "10 12 03 00",
      "10 12 05 00",
      "10 12 06 00",
      "10 12 08 00",
      "10 12 10 00",
      "10 12 13 00",
      "10 12 99 00",
      "10 13 01 00",
      "10 13 04 00",
      "10 13 06 00",
      "10 13 07 00",
      "10 13 10 00",
      "10 13 11 00",
      "10 13 13 00",
      "10 13 14 00",
      "10 13 99 00",
      "10 99 01 00",
      "11 01 98 00",
      "11 01 99 00",
      "12 01 01 00",
      "12 01 02 00",
      "12 01 03 00",
      "12 01 04 00",
      "12 01 05 00",
      "12 01 13 00",
      "12 01 15 00",
      "12 01 17 00",
      "12 01 20 00",
      "12 01 21 00",
      "12 01 99 00",
      "15 01 01 00",
      "15 01 02 00",
      "15 01 03 00",
      "15 01 04 00",
      "15 01 05 00",
      "15 01 06 00",
      "15 01 07 00",
      "15 01 09 00",
      "15 01 12 00",
      "15 02 03 00",
      "15 03 01 00",
      "15 03 02 00",
      "15 03 03 00",
      "15 03 04 00",
      "15 03 05 00",
      "15 03 06 00",
      "15 03 07 00",
      "15 03 08 00",
      "15 03 09 00",
      "15 03 10 00",
      "15 04 02 00",
      "15 05 01 00",
      "15 05 02 00",
      "15 05 03 00",
      "15 05 04 00",
      "15 05 05 00",
      "15 05 06 00",
      "15 05 07 00",
      "15 05 08 00",
      "15 05 11 00",
      "16 01 01 00",
      "16 01 02 00",
      "16 01 05 00",
      "16 01 12 00",
      "16 01 15 00",
      "16 01 16 00",
      "16 01 17 00",
      "16 01 18 00",
      "16 01 19 00",
      "16 01 20 00",
      "16 01 22 00",
      "16 01 99 00",
      "16 02 14 00",
      "16 02 16 00",
      "16 03 04 00",
      "16 03 06 00",
      "16 03 08 00",
      "16 03 80 00",
      "16 05 05 00",
      "16 05 09 00",
      "16 06 04 00",
      "16 06 05 00",
      "16 08 01 00",
      "16 08 03 00",
      "16 08 04 00",
      "16 10 02 00",
      "16 10 04 00",
      "16 11 02 00",
      "16 11 04 00",
      "16 11 06 00",
      "17 01 01 00",
      "17 01 02 00",
      "17 01 03 00",
      "17 01 07 00",
      "17 01 08 00",
      "17 02 01 00",
      "17 02 02 00",
      "17 02 03 00",
      "17 03 02 00",
      "17 04 01 00",
      "17 04 02 00",
      "17 04 03 00",
      "17 04 04 00",
      "17 04 05 00",
      "17 04 06 00",
      "17 04 07 00",
      "17 04 11 00",
      "17 05 04 00",
      "17 05 06 00",
      "17 05 08 00",
      "17 05 10 00",
      "17 06 04 00",
      "17 08 02 00",
      "17 09 04 00",
      "19 01 02 00",
      "19 01 12 00",
      "19 01 14 00",
      "19 01 16 00",
      "19 01 18 00",
      "19 01 19 00",
      "19 01 99 00",
      "19 02 03 00",
      "19 02 06 00",
      "19 02 10 00",
      "19 02 99 00",
      "19 03 05 00",
      "19 03 07 00",
      "19 03 99 00",
      "19 05 99 00",
      "19 07 03 00",
      "19 08 09 00",
      "19 08 12 00",
      "19 08 14 00",
      "19 08 99 00",
      "19 10 01 00",
      "19 10 02 00",
      "19 10 04 00",
      "19 10 06 00",
      "19 12 01 00",
      "19 12 02 00",
      "19 12 03 00",
      "19 12 04 00",
      "19 12 05 00",
      "19 12 07 00",
      "19 12 08 00",
      "19 12 12 00",
      "19 13 02 00",
      "19 13 04 00",
      "19 13 06 00",
      "19 13 08 00",
      "20 01 01 00",
      "20 01 02 00",
      "20 01 08 00",
      "20 01 10 00",
      "20 01 11 00",
      "20 01 25 00",
      "20 01 28 00",
      "20 01 30 00",
      "20 01 32 00",
      "20 01 34 00",
      "20 01 36 00",
      "20 01 38 00",
    ];

    const rnpE = [
      "01 03 05 00",
      "01 05 06 00",
      "03 02 05 00",
      "04 02 13 00",
      "04 02 18 00",
      "05 01 10 01",
      "06 03 12 00",
      "06 03 14 00",
      "06 03 16 00",
      "06 03 17 00",
      "06 03 18 00",
      "06 03 19 00",
      "06 08 02 00",
      "06 13 06 00",
      "06 13 07 00",
      "07 01 12 00",
      "07 02 10 01",
      "07 03 12 00",
      "07 04 12 00",
      "07 05 12 00",
      "07 05 14 00",
      "07 06 12 00",
      "07 07 12 00",
      "08 03 02 00",
      "10 01 06 00",
      "10 02 04 00",
      "10 02 05 00",
      "10 02 06 00",
      "10 02 09 00",
      "10 02 17 00",
      "10 02 18 00",
      "10 02 19 00",
      "10 02 20 00",
      "10 07 06 00",
      "11 01 10 00",
      "11 01 12 00",
      "11 01 14 00",
      "11 02 03 00",
      "11 02 06 00",
      "11 05 01 00",
      "15 04 08 00",
      "16 01 23 00",
      "16 01 24 00",
      "16 01 25 00",
      "16 01 26 00",
      "16 01 27 00",
      "16 01 28 00",
      "16 01 29 00",
      "16 01 30 00",
      "16 02 02 00",
      "16 02 03 00",
      "16 02 04 00",
      "16 02 05 00",
      "16 02 06 00",
      "16 02 07 00",
      "16 02 08 00",
      "16 03 01 00",
      "16 03 02 00",
      "16 08 09 00",
      "16 08 10 00",
      "17 01 04 00",
      "17 01 05 00",
      "17 02 05 00",
      "17 02 06 00",
      "17 02 07 00",
      "17 02 08 00",
      "17 02 09 00",
      "17 02 10 00",
      "17 02 11 00",
      "17 02 12 00",
      "17 02 13 00",
      "17 02 14 00",
      "17 02 15 00",
      "17 02 16 00",
      "17 02 17 00",
      "17 02 18 00",
      "17 02 19 00",
      "17 02 20 00",
      "17 02 21 00",
      "17 02 22 00",
      "17 02 23 00",
      "17 02 24 00",
      "17 02 25 00",
      "17 02 26 00",
      "17 02 27 00",
      "17 02 28 00",
      "17 02 29 00",
      "17 02 30 00",
      "17 02 31 00",
      "17 02 32 00",
      "17 02 33 00",
      "17 02 34 00",
      "17 02 35 00",
      "17 02 36 00",
      "17 02 37 00",
      "17 02 38 00",
      "17 02 39 00",
      "17 02 40 00",
      "17 02 41 00",
      "17 02 42 00",
      "17 02 43 00",
      "17 02 44 00",
      "17 02 45 00",
      "17 02 46 00",
      "17 02 47 00",
      "17 02 48 00",
      "17 02 49 00",
      "17 02 50 00",
      "17 02 51 00",
      "17 02 52 00",
      "17 02 53 00",
      "17 02 54 00",
      "17 02 55 00",
      "17 02 56 00",
      "17 02 57 00",
      "17 02 58 00",
      "17 02 59 00",
      "17 02 60 00",
      "17 02 61 00",
      "17 02 62 00",
      "17 02 63 00",
      "17 02 64 00",
      "17 02 65 00",
      "17 02 66 00",
      "17 02 67 00",
      "17 02 68 00",
      "17 02 69 00",
      "17 02 70 00",
      "17 02 71 00",
      "17 02 72 00",
      "17 02 73 00",
      "17 02 74 00",
      "17 02 75 00",
      "17 02 76 00",
      "17 02 77 00",
      "17 02 78 00",
      "17 02 79 00",
      "17 02 80 00",
      "17 02 81 00",
      "17 02 82 00",
      "17 02 83 00",
      "17 02 84 00",
      "17 02 85 00",
      "17 02 86 00",
      "17 02 87 00",
      "17 02 88 00",
      "17 02 89 00",
      "17 02 90 00",
      "17 02 91 00",
      "17 02 92 00",
      "17 02 93 00",
      "17 02 94 00",
      "17 02 95 00",
      "17 02 96 00",
      "17 02 97 00",
      "17 02 98 00",
      "19 02 02 00",
      "19 12 09 01",
    ];

    // Buscando todas as amostras e parâmetros
    const samples = await Sample.findAll({ raw: true });
    const pop = await Pop.findAll({ raw: true });
    const lsct = await Lsct.findAll({ raw: true });

    // Iterar por cada amostra para classifica-lás
    for (const sample of samples) {
      // Se o código da LGR for RP de entrada U, já classificamos o resíduo
      if (rpU.includes(sample.data.abntCode)) {
        sample.data["inputType"] = "U";
        sample.data["classification"] = "RP";
        await Sample.update(sample, { where: { id: sample.id } });
        // Se o código da LGR for RNP de entrada U, já classificamos o resíduo
      } else if (rnpU.includes(sample.data.abntCode)) {
        sample.data["inputType"] = "U";
        sample.data["classification"] = "RNP";
        await Sample.update(sample, { where: { id: sample.id } });
        // Se for entrada E
      } else {
        const parametersAboveLimit = [];
        // Iterar por cada parâmetro da biblioteca POP e por cada parâmetro da
        // amostra buscando por correspondência
        for (const parameterPop of pop) {
          for (const [key, value] of Object.entries(sample.data)) {
            // Se houver correspondência e o valor for maior que o máximo permitido,
            // adicionamos à lista de parâmetros acima do limite
            if (
              key === parameterPop.name &&
              parseFloat(value) >= parseFloat(parameterPop.maxValue)
            ) {
              parametersAboveLimit.push(parameterPop.name);
            }
          }
        }
        // Lógica especial para lidar com a LSCT
        // Códigos cujo valor limite é o somatório
        let H300_Tox_Aguda_1 = 0;
        let H300_Tox_Aguda_2 = 0;
        let H301 = 0;
        let H302 = 0;
        let H310_Tox_Aguda_1 = 0;
        let H310_Tox_Aguda_2 = 0;
        let H311 = 0;
        let H312 = 0;
        let H330_Tox_Aguda_1 = 0;
        let H330_Tox_Aguda_2 = 0;
        let H331 = 0;
        let H332 = 0;
        let H400 = 0;
        let H410 = 0;
        let H411 = 0;
        let H412 = 0;
        let H413 = 0;
        let H420 = 0;
        let H314_Irrit_Pele_1A = 0;
        let H314_Irrit_Pele_1B = 0;
        let H314_Irrit_Pele_1C = 0;
        let H315 = 0;
        let H318 = 0;
        let H319 = 0;

        const noHazardCodes = [
          "H314_Irrit_Pele_1A",
          "H314_Irrit_Pele_1B",
          "H314_Irrit_Pele_1C",
          "H315",
          "H318",
          "H319",
          "H317",
          "H334",
        ];

        const sampleAllHazardCodes = [];
        const sampleHazardCodesAboveLimit = [];

        const includesOnly = (array, refArray) => {
          return array.every((element) => refArray.includes(element));
        };

        // Iterar por cada parâmetro da biblioteca LSCT e por cada parâmetro da
        // amostra buscando por correspondência
        for (const parameterLsct of lsct) {
          for (const [key, value] of Object.entries(sample.data)) {
            if (parameterLsct.name.includes(key)) {
              // Se o valor do parâmetro for maior que o máximo permitido,
              // adicionamos à lista de parâmetros acima do limite
              if (parseFloat(value) >= parseFloat(parameterLsct.maxValue)) {
                parametersAboveLimit.push(parameterLsct.name);
                sampleHazardCodesAboveLimit.push(
                  parameterLsct.name.split("_")[1]
                );
              }
              // Vou utilizar para classificar a amostra como NP se ela
              // tiver apenas códigos de noHazardCodes, independentemente se estão
              // acima ou não do limite
              const parameterLsctCode = parameterLsct.code;
              sampleAllHazardCodes.push(parameterLsctCode);
              // Todos os ifs abaixo são para somar os valores dos parâmetros
              // de acordo com os códigos da LSCT cujo valor limite é o somatório
              if (parameterLsctCode === "H300_Tox_Aguda_1") {
                H300_Tox_Aguda_1 += parseFloat(value);
              }
              if (parameterLsctCode === "H300_Tox_Aguda_2") {
                H300_Tox_Aguda_2 += parseFloat(value);
              }
              if (parameterLsctCode === "H301") {
                H301 += parseFloat(value);
              }
              if (parameterLsctCode === "H302") {
                H302 += parseFloat(value);
              }
              if (parameterLsctCode === "H310_Tox_Aguda_1") {
                H310_Tox_Aguda_1 += parseFloat(value);
              }
              if (parameterLsctCode === "H310_Tox_Aguda_2") {
                H310_Tox_Aguda_2 += parseFloat(value);
              }
              if (parameterLsctCode === "H311") {
                H311 += parseFloat(value);
              }
              if (parameterLsctCode === "H312") {
                H312 += parseFloat(value);
              }
              if (parameterLsctCode === "H330_Tox_Aguda_1") {
                H330_Tox_Aguda_1 += parseFloat(value);
              }
              if (parameterLsctCode === "H330_Tox_Aguda_2") {
                H330_Tox_Aguda_2 += parseFloat(value);
              }
              if (parameterLsctCode === "H331") {
                H331 += parseFloat(value);
              }
              if (parameterLsctCode === "H332") {
                H332 += parseFloat(value);
              }
              // Apenas os código H400 e H410 são multiplicados pelo fator M
              if (parameterLsctCode === "H400") {
                H400 += parseFloat(value * parameterLsct.mFactor);
              }
              if (parameterLsctCode === "H410") {
                H410 += parseFloat(value * parameterLsct.mFactor);
              }
              if (parameterLsctCode === "H411") {
                H411 += parseFloat(value);
              }
              if (parameterLsctCode === "H412") {
                H412 += parseFloat(value);
              }
              if (parameterLsctCode === "H413") {
                H413 += parseFloat(value);
              }
              if (parameterLsctCode === "H420") {
                H420 += parseFloat(value);
              }
              if (parameterLsctCode === "H314_Irrit_Pele_1A") {
                H314_Irrit_Pele_1A += parseFloat(value);
              }
              if (parameterLsctCode === "H314_Irrit_Pele_1B") {
                H314_Irrit_Pele_1B += parseFloat(value);
              }
              if (parameterLsctCode === "H314_Irrit_Pele_1C") {
                H314_Irrit_Pele_1C += parseFloat(value);
              }
              if (parameterLsctCode === "H315") {
                H315 += parseFloat(value);
              }
              if (parameterLsctCode === "H318") {
                H318 += parseFloat(value);
              }
              if (parameterLsctCode === "H319") {
                H319 += parseFloat(value);
              }
            }
          }
        }
        // Avaliando os códigos cujo valor limite é o somatório dos parâmetros
        if (H300_Tox_Aguda_1 >= 0.1) {
          if (!sampleHazardCodesAboveLimit.includes("H300_Tox_Aguda_1")) {
            sampleHazardCodesAboveLimit.push("H300_Tox_Aguda_1");
          }
        }
        if (H300_Tox_Aguda_2 >= 0.25) {
          if (!sampleHazardCodesAboveLimit.includes("H300_Tox_Aguda_2")) {
            sampleHazardCodesAboveLimit.push("H300_Tox_Aguda_2");
          }
        }
        if (H301 >= 5) {
          if (!sampleHazardCodesAboveLimit.includes("H301")) {
            sampleHazardCodesAboveLimit.push("H301");
          }
        }
        if (H302 >= 25) {
          if (!sampleHazardCodesAboveLimit.includes("H302")) {
            sampleHazardCodesAboveLimit.push("H302");
          }
        }
        if (H310_Tox_Aguda_1 >= 0.25) {
          if (!sampleHazardCodesAboveLimit.includes("H310_Tox_Aguda_1")) {
            sampleHazardCodesAboveLimit.push("H310_Tox_Aguda_1");
          }
        }
        if (H310_Tox_Aguda_2 >= 2.5) {
          if (!sampleHazardCodesAboveLimit.includes("H310_Tox_Aguda_2")) {
            sampleHazardCodesAboveLimit.push("H310_Tox_Aguda_2");
          }
        }
        if (H311 >= 15) {
          if (!sampleHazardCodesAboveLimit.includes("H311")) {
            sampleHazardCodesAboveLimit.push("H311");
          }
        }
        if (H312 >= 55) {
          if (!sampleHazardCodesAboveLimit.includes("H312")) {
            sampleHazardCodesAboveLimit.push("H312");
          }
        }
        if (H330_Tox_Aguda_1 >= 0.1) {
          if (!sampleHazardCodesAboveLimit.includes("H330_Tox_Aguda_1")) {
            sampleHazardCodesAboveLimit.push("H330_Tox_Aguda_1");
          }
        }
        if (H330_Tox_Aguda_2 >= 0.5) {
          if (!sampleHazardCodesAboveLimit.includes("H330_Tox_Aguda_2")) {
            sampleHazardCodesAboveLimit.push("H330_Tox_Aguda_2");
          }
        }
        if (H331 >= 3.5) {
          if (!sampleHazardCodesAboveLimit.includes("H331")) {
            sampleHazardCodesAboveLimit.push("H331");
          }
        }
        if (H332 >= 22.5) {
          if (!sampleHazardCodesAboveLimit.includes("H332")) {
            sampleHazardCodesAboveLimit.push("H332");
          }
        }
        if (H400 >= 25) {
          if (!sampleHazardCodesAboveLimit.includes("H400")) {
            sampleHazardCodesAboveLimit.push("H400");
          }
        }
        if (H410 >= 0.25) {
          if (!sampleHazardCodesAboveLimit.includes("H410")) {
            sampleHazardCodesAboveLimit.push("H410");
          }
        }
        if (H411 >= 2.5) {
          if (!sampleHazardCodesAboveLimit.includes("H411")) {
            sampleHazardCodesAboveLimit.push("H411");
          }
        }
        if (H412 >= 25) {
          if (!sampleHazardCodesAboveLimit.includes("H412")) {
            sampleHazardCodesAboveLimit.push("H412");
          }
        }
        if (H413 >= 25) {
          if (!sampleHazardCodesAboveLimit.includes("H413")) {
            sampleHazardCodesAboveLimit.push("H413");
          }
        }
        if (H420 >= 0.1) {
          if (!sampleHazardCodesAboveLimit.includes("H420")) {
            sampleHazardCodesAboveLimit.push("H420");
          }
        }
        if (H314_Irrit_Pele_1A >= 1) {
          if (!sampleHazardCodesAboveLimit.includes("H314_Irrit_Pele_1A")) {
            sampleHazardCodesAboveLimit.push("H314_Irrit_Pele_1A");
          }
        }
        if (H314_Irrit_Pele_1B >= 1) {
          if (!sampleHazardCodesAboveLimit.includes("H314_Irrit_Pele_1B")) {
            sampleHazardCodesAboveLimit.push("H314_Irrit_Pele_1B");
          }
        }
        if (H314_Irrit_Pele_1C >= 1) {
          if (!sampleHazardCodesAboveLimit.includes("H314_Irrit_Pele_1C")) {
            sampleHazardCodesAboveLimit.push("H314_Irrit_Pele_1C");
          }
        }
        if (H315 >= 10) {
          if (!sampleHazardCodesAboveLimit.includes("H315")) {
            sampleHazardCodesAboveLimit.push("H315");
          }
        }
        if (H318 >= 1) {
          if (!sampleHazardCodesAboveLimit.includes("H318")) {
            sampleHazardCodesAboveLimit.push("H318");
          }
        }
        if (H319 >= 10) {
          if (!sampleHazardCodesAboveLimit.includes("H319")) {
            sampleHazardCodesAboveLimit.push("H319");
          }
        }
        // Se o tamanho da lista > 0 e a amostra não apresentar apenas códigos de noHazardCodes,
        // classificamos como RP
        if (
          parametersAboveLimit.length > 0 &&
          !includesOnly(sampleAllHazardCodes, noHazardCodes)
        ) {
          sample.data["parametersAboveLimit"] = parametersAboveLimit;
          sample.data["sampleHazardCodesAboveLimit"] =
            sampleHazardCodesAboveLimit;
          sample.data["inputType"] = "E";
          sample.data["classification"] = "RP";
          await Sample.update(sample, { where: { id: sample.id } });
          // Se o tamanho da lista > 0 e a amostra apresentar apenas códigos de noHazardCodes,
          // classificamos como RNP
        } else if (
          parametersAboveLimit.length > 0 &&
          includesOnly(sampleAllHazardCodes, noHazardCodes)
        ) {
          sample.data["inputType"] = "E";
          sample.data["classification"] = "RNP";
          await Sample.update(sample, { where: { id: sample.id } });
          // Se o tamanho da lista for 0, avaliamos o passo 3
        } else if (parametersAboveLimit.length === 0) {
          if (
            parseInt(sample.data.flammable) ||
            parseInt(sample.data.reactive) ||
            parseInt(sample.data.corrosive) ||
            parseInt(sample.data.pathogenic)
          ) {
            sample.data["inputType"] = "E";
            sample.data["classification"] = "RP";
            await Sample.update(sample, { where: { id: sample.id } });
          } else {
            sample.data["inputType"] = "E";
            sample.data["classification"] = "RNP";
            await Sample.update(sample, { where: { id: sample.id } });
          }
        }
      }
    }
    res.redirect(`/project/${samples[0].ProjectId}/samples`);
  }
};
